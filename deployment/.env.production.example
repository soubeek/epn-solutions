# Configuration Django - Production
# Copier ce fichier en backend/.env.production et adapter les valeurs

# === Django Core ===
DJANGO_ENV=production
DEBUG=False

# Générer avec: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=CHANGEME_GENERATE_NEW_SECRET_KEY

# Hosts autorisés (séparer par des virgules)
ALLOWED_HOSTS=poste-public.mairie.local,192.168.1.10,localhost

# Origins de confiance pour CSRF (avec protocole)
CSRF_TRUSTED_ORIGINS=https://poste-public.mairie.local,https://192.168.1.10

# === Base de Données PostgreSQL ===
DATABASE_URL=postgresql://poste_user:CHANGEME_DB_PASSWORD@localhost:5432/poste_public_prod

# Ou configuration détaillée:
# DB_ENGINE=django.db.backends.postgresql
# DB_NAME=poste_public_prod
# DB_USER=poste_user
# DB_PASSWORD=CHANGEME_DB_PASSWORD
# DB_HOST=localhost
# DB_PORT=5432

# === Redis (pour Django Channels) ===
REDIS_URL=redis://localhost:6379/0

# Ou configuration détaillée:
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=

# === Sécurité HTTPS ===
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=SAMEORIGIN

# HSTS (HTTP Strict Transport Security)
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# === Email (optionnel) ===
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=noreply@mairie.re
EMAIL_HOST_PASSWORD=CHANGEME_EMAIL_PASSWORD
DEFAULT_FROM_EMAIL=Poste Public <noreply@mairie.re>
SERVER_EMAIL=admin@mairie.re

# === Fichiers Statiques ===
STATIC_ROOT=/opt/poste-public/backend/staticfiles
MEDIA_ROOT=/opt/poste-public/backend/media

# === Logging ===
LOG_LEVEL=INFO
LOG_FILE=/var/log/poste-public/django.log

# === Application ===
SITE_NAME=Poste Public - Mairie de La Réunion
ADMIN_URL=admin/

# Durée de session par défaut (en secondes)
DEFAULT_SESSION_DURATION=3600

# === Django Channels ===
CHANNEL_LAYERS_BACKEND=channels_redis.core.RedisChannelLayer
CHANNEL_LAYERS_CONFIG_HOSTS=redis://localhost:6379/0
